---
import { getEntry } from "astro:content";
import { Navbar as NavbarReact, type NavbarProps } from "./navbar/index.tsx";
import { Image } from "astro:assets";
import logo from "@/assets/logo.png";

let postInfo: NavbarProps["postInfo"] = undefined;
if (Astro.routePattern === "/post/[slug]") {
  const post = await getEntry("post", Astro.params.slug!);
  if (!post) {
    return;
  }
  postInfo = {
    title: post.data.title,
    tags: post.data.tags,
  };
}
---

<NavbarReact url={Astro.url} postInfo={postInfo} client:load>
  <Image
    src={logo}
    alt="logo"
    class="h-8 w-8 rounded-lg"
    width={32}
    height={32}
  />
</NavbarReact>
